{% extends "layout.html" %}
{% block title %}
Membership
{% endblock %}

{% block main %}
<h1>Membership</h1>
<p>Register a student into a CCA</p>

    {% if page_type = 'new' %}
    <h2>Input Membership details</h2>
    <form action="{{ form_meta['action'] }}" method="{{ form_meta['method'] }}">
        <label for="student_id">Student ID:</label>
        <input
            id="student_id"
            type="text"
            name="student_id"
            value=""
            placeholder="ID of Student"
            autocomplete="off"
            required
            >
        
        <label for="cca_id">CCA ID:</label>
        <select name="cca_id" id="cca_id">
            {% for cca in cca_ids %}
            <option value="{{ cca }}">{{ cca }}</option>
            {% endfor %}
        </select>

        <label for="role">Role:</label>
        <input
            id="role"
            type="text"
            name="role"
            value=""
            placeholder="Role of Student"
            autocomplete="off"
            >
        
        <input type="submit" value="Submit">
    </form>
    <p id="fail">{{ message }}</p>

    {% elif page_type = 'edit' %}
    <h2>Input Membership details</h2>
    <form action="{{ form_meta['action'] }}" method="{{ form_meta['method'] }}">
        <label for="student_id">Student ID:</label>
        <select name="student_id" id="student_id">
            {% for student in student_ids %}
            <option value="{{ student }}">{{ student }}</option>
            {% endfor %}
        </select>

        <label for="cca_id">CCA ID:</label>
        <select name="cca_id" id="cca_id">
            {% for cca in cca_ids %}
            <option value="{{ cca }}">{{ cca }}</option>
            {% endfor %}
            <option value="None">None</option>
        </select>

        <label for="role">Role:</label>
        <input
            id="role"
            type="text"
            name="role"
            value=""
            placeholder="Role of Student"
            autocomplete="off"
            >

        <input type="submit" value="Submit">
    </form>
    <p id="fail">{{ message }}</p>

    {% elif page_type = 'confirm' %}
    <h2>Confirm details</h2>
        <table>
            {% for name, value in form_data.items() %}
            <tr>
                <th>{{ name }}</th>
                <td>{{ value }}</td>
            </tr>
            {% endfor %}
        </table>
        <p>Is this correct?</p>
        <form action="{{ form_meta['action'] }}" method="{{ form_meta['method'] }}">
            {% for name, value in form_data.items() %}
            <input
                type="hidden"
                name="{{ name }}"
                value="{{ value }}"
                >
            {% endfor %}
            <input type="submit" value="Yes">
        </form>
        
        <form action="/edit_membership" method="GET">
            <input type="submit" value="No">
        </form>
    {% endif %}
{% endblock %}